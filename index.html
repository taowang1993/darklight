<!-- Darklight Head-->
<script src="https://cdn.jsdelivr.net/npm/darkreader/darkreader.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<script>
document.documentElement.style.display = 'none'; // Prevent FOUC
window.addEventListener('load', function() {
    let isDarkModeEnabledFromStorage = false;
    try {
        isDarkModeEnabledFromStorage = localStorage.getItem('SunMoon') === 'enabled';
    } catch (error) {
        console.error('Error accessing localStorage:', error);
    }

    if (isDarkModeEnabledFromStorage) {
        DarkReader.enable({ brightness: 120, contrast: 90, sepia: 10 });
    } else {
        DarkReader.disable();
    }
    document.documentElement.style.display = ''; // Restore display after setting theme
});
</script>

<style>
.icon.bi.bi-moon-stars-fill {
    color: #0000ff;
}
.icon.bi.bi-sun {
    color: #ffd43b;
    font-size: 1.3em;
}
#localnavbarplus-darklight:focus,
#localnavbarplus-darklight a:focus,
#localnavbarplus-darklight .icon:focus {
    background-color: transparent;
    box-shadow: none;
}
</style>




<!-- Darklight Bottom-->
<script>
document.addEventListener('DOMContentLoaded', function () {
    const updateIcon = (isEnabled) => {
        const sunMoonIcon = document.querySelector('#localnavbarplus-darklight i.icon');
        if (sunMoonIcon) {
            sunMoonIcon.className = isEnabled ? 'icon bi bi-sun' : 'icon bi bi-moon-stars-fill';
            sunMoonIcon.setAttribute('aria-label', isEnabled ? 'Disable dark mode' : 'Enable dark mode');
        }
    };

    let isDarkModeEnabledFromStorage = false;
    try {
        isDarkModeEnabledFromStorage = localStorage.getItem('SunMoon') === 'enabled';
    } catch (error) {
        console.error('Error accessing localStorage:', error);
    }
    updateIcon(isDarkModeEnabledFromStorage);

    const toggleSunMoonDiv = document.getElementById('localnavbarplus-darklight');
    if (toggleSunMoonDiv) {
        toggleSunMoonDiv.addEventListener('click', function(event) {
            event.preventDefault();
            let isDarkModeCurrentlyActive = DarkReader.isEnabled();
            try {
                if (isDarkModeCurrentlyActive) {
                    DarkReader.disable();
                    localStorage.setItem('SunMoon', 'disabled');
                } else {
                    DarkReader.enable({ brightness: 120, contrast: 90, sepia: 10 });
                    localStorage.setItem('SunMoon', 'enabled');
                }
            } catch (error) {
                console.error('Error updating localStorage:', error);
            }
            updateIcon(!isDarkModeCurrentlyActive); // Updates the icon based on the new state
        });
    }
});
</script>

